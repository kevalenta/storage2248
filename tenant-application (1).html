<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental Application - Affordable Self Storage</title>
    <meta name="description" content="Complete your rental application for Affordable Self Storage in Johnson City, NY. Secure online form with document upload.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2c3e50;
            --primary-dark: #1a252f;
            --accent: #3498db;
            --accent-light: #5dade2;
            --success: #27ae60;
            --error: #e74c3c;
            --text-dark: #2c3e50;
            --text-light: #5d6d7e;
            --bg-cream: #ecf0f1;
            --white: #ffffff;
            --border: #bdc3c7;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Work Sans', sans-serif;
            color: var(--text-dark);
            line-height: 1.6;
            background-color: var(--bg-cream);
        }

        h1, h2, h3 {
            font-family: 'DM Serif Display', serif;
            font-weight: 400;
            line-height: 1.2;
        }

        /* Skip Navigation Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: var(--white);
            padding: 8px 16px;
            text-decoration: none;
            font-weight: 600;
            z-index: 10000;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Enhanced Focus Indicators */
        a:focus, button:focus, input:focus, textarea:focus, select:focus {
            outline: 3px solid var(--accent);
            outline-offset: 2px;
        }

        /* Screen Reader Only Text */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Header */
        header {
            background-color: var(--white);
            padding: 1.25rem 5%;
            box-shadow: 0 2px 10px var(--shadow);
            border-bottom: 3px solid var(--accent);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            font-size: 1.75rem;
            color: var(--primary);
            font-family: 'DM Serif Display', serif;
            text-decoration: none;
        }

        .back-link {
            color: var(--accent);
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: var(--accent-light);
        }

        /* Main Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 3rem 5%;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-header h1 {
            font-size: clamp(2rem, 4vw, 2.75rem);
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .page-header p {
            font-size: 1.1rem;
            color: var(--text-light);
        }

        /* Security Badge */
        .security-badge {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .security-icon {
            width: 48px;
            height: 48px;
            color: #22543d;
        }

        .security-text {
            flex: 1;
        }

        .security-text h3 {
            color: #22543d;
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .security-text p {
            color: #2f855a;
            font-size: 0.95rem;
            margin: 0;
        }

        /* Form Styles */
        .application-form {
            background: var(--white);
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .form-section {
            margin-bottom: 2.5rem;
        }

        .form-section:last-of-type {
            margin-bottom: 0;
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-row.two-col {
            grid-template-columns: 1fr 1fr;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        .required {
            color: var(--error);
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        select,
        textarea {
            padding: 0.875rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Work Sans', sans-serif;
            transition: all 0.3s ease;
            background: var(--white);
        }

        input:focus,
        select:focus,
        textarea:focus {
            border-color: var(--accent);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        input.error,
        select.error,
        textarea.error {
            border-color: var(--error);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .help-text {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-top: 0.5rem;
        }

        .error-message {
            color: var(--error);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: none;
        }

        .error-message.visible {
            display: block;
        }

        /* File Upload Styles */
        .file-upload-wrapper {
            position: relative;
        }

        .file-upload-area {
            border: 3px dashed var(--border);
            border-radius: 12px;
            padding: 2.5rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--bg-cream);
        }

        .file-upload-area:hover,
        .file-upload-area.dragover {
            border-color: var(--accent);
            background: rgba(52, 152, 219, 0.05);
        }

        .file-upload-area.has-file {
            border-color: var(--success);
            background: rgba(39, 174, 96, 0.05);
        }

        input[type="file"] {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .upload-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            color: var(--accent);
        }

        .upload-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .upload-subtext {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .file-preview {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: var(--white);
            border: 2px solid var(--success);
            border-radius: 8px;
            display: none;
        }

        .file-preview.visible {
            display: block;
        }

        .file-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .file-icon {
            width: 40px;
            height: 40px;
            color: var(--success);
        }

        .file-details h4 {
            font-size: 1rem;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .file-size {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        .remove-file {
            background: var(--error);
            color: var(--white);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: opacity 0.3s ease;
        }

        .remove-file:hover {
            opacity: 0.9;
        }

        .preview-image {
            max-width: 100%;
            border-radius: 8px;
            margin-top: 1rem;
        }

        /* Checkbox Styles */
        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-top: 0.25rem;
            cursor: pointer;
        }

        .checkbox-group label {
            margin-bottom: 0;
            cursor: pointer;
            flex: 1;
        }

        /* Submit Button */
        .submit-section {
            margin-top: 2.5rem;
            padding-top: 2.5rem;
            border-top: 2px solid var(--border);
        }

        .submit-btn {
            width: 100%;
            padding: 1.25rem 2rem;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-size: 1.25rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .submit-btn:hover:not(:disabled) {
            background: var(--accent-light);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .submit-btn:disabled {
            background: var(--border);
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Success Message */
        .success-message {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            display: none;
        }

        .success-message.visible {
            display: block;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            color: var(--success);
        }

        .success-message h2 {
            color: var(--success);
            margin-bottom: 1rem;
        }

        .success-message p {
            color: #2f855a;
            font-size: 1.1rem;
        }

        /* Footer */
        footer {
            background-color: var(--primary-dark);
            color: var(--white);
            padding: 2rem 5%;
            text-align: center;
            margin-top: 4rem;
        }

        footer p {
            margin: 0;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .form-row.two-col {
                grid-template-columns: 1fr;
            }

            .application-form {
                padding: 1.5rem;
            }

            .security-badge {
                flex-direction: column;
                text-align: center;
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header role="banner">
        <div class="header-content">
            <a href="index.html" class="logo">Affordable Self Storage</a>
            <a href="index.html" class="back-link">
                <svg style="width: 20px; height: 20px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
                Back to Home
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="container">
        <div class="page-header">
            <h1>Rental Application</h1>
            <p>Complete this form to begin your rental process. All information is transmitted securely.</p>
        </div>

        <div class="security-badge">
            <svg class="security-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
            </svg>
            <div class="security-text">
                <h3>ðŸ”’ Secure & Confidential</h3>
                <p>Your information is encrypted and stored securely. We never share your data with third parties.</p>
            </div>
        </div>

        <form action="https://formsubmit.co/selfstorage2248@gmail.com" method="POST" id="applicationForm" class="application-form" enctype="multipart/form-data">
            
            <!-- FormSubmit.co Configuration -->
            <input type="hidden" name="_subject" value="New Storage Unit Application Received">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_template" value="table">
            <input type="hidden" name="_next" value="https://storage2248.com/application-success.html">
            
            <!-- Personal Information -->
            <div class="form-section">
                <h2 class="section-title">Personal Information</h2>
                
                <div class="form-row two-col">
                    <div class="form-group">
                        <label for="firstName">First Name <span class="required">*</span></label>
                        <input type="text" id="firstName" name="firstName" required aria-required="true" aria-describedby="firstName-error">
                        <span class="error-message" id="firstName-error" role="alert"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">Last Name <span class="required">*</span></label>
                        <input type="text" id="lastName" name="lastName" required aria-required="true" aria-describedby="lastName-error">
                        <span class="error-message" id="lastName-error" role="alert"></span>
                    </div>
                </div>

                <div class="form-row two-col">
                    <div class="form-group">
                        <label for="email">Email Address <span class="required">*</span></label>
                        <input type="email" id="email" name="email" required aria-required="true" aria-describedby="email-error">
                        <span class="error-message" id="email-error" role="alert"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number <span class="required">*</span></label>
                        <input type="tel" id="phone" name="phone" required aria-required="true" aria-describedby="phone-error" placeholder="(555) 123-4567">
                        <span class="error-message" id="phone-error" role="alert"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="dateOfBirth">Date of Birth <span class="required">*</span></label>
                        <input type="date" id="dateOfBirth" name="dateOfBirth" required aria-required="true" aria-describedby="dateOfBirth-error">
                        <p class="help-text">You must be 18 years or older to rent a storage unit</p>
                        <span class="error-message" id="dateOfBirth-error" role="alert"></span>
                    </div>
                </div>
            </div>

            <!-- Address Information -->
            <div class="form-section">
                <h2 class="section-title">Current Address</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="street">Street Address <span class="required">*</span></label>
                        <input type="text" id="street" name="street" required aria-required="true" aria-describedby="street-error">
                        <span class="error-message" id="street-error" role="alert"></span>
                    </div>
                </div>

                <div class="form-row two-col">
                    <div class="form-group">
                        <label for="city">City <span class="required">*</span></label>
                        <input type="text" id="city" name="city" required aria-required="true" aria-describedby="city-error">
                        <span class="error-message" id="city-error" role="alert"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="state">State <span class="required">*</span></label>
                        <select id="state" name="state" required aria-required="true" aria-describedby="state-error">
                            <option value="">Select State</option>
                            <option value="NY" selected>New York</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="NJ">New Jersey</option>
                            <option value="CT">Connecticut</option>
                            <option value="MA">Massachusetts</option>
                            <option value="VT">Vermont</option>
                            <option value="NH">New Hampshire</option>
                            <option value="ME">Maine</option>
                            <option value="RI">Rhode Island</option>
                        </select>
                        <span class="error-message" id="state-error" role="alert"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="zipCode">ZIP Code <span class="required">*</span></label>
                        <input type="text" id="zipCode" name="zipCode" required aria-required="true" aria-describedby="zipCode-error" maxlength="5" pattern="[0-9]{5}">
                        <span class="error-message" id="zipCode-error" role="alert"></span>
                    </div>
                </div>
            </div>

            <!-- Storage Unit Preferences -->
            <div class="form-section">
                <h2 class="section-title">Storage Unit Preferences</h2>
                
                <div class="form-row two-col">
                    <div class="form-group">
                        <label for="unitSize">Preferred Unit Size</label>
                        <select id="unitSize" name="unitSize" aria-describedby="unitSize-help">
                            <option value="">Select Size (Optional)</option>
                            <option value="5x5">5' Ã— 5' - Small Closet</option>
                            <option value="5x10">5' Ã— 10' - Walk-in Closet</option>
                            <option value="10x10">10' Ã— 10' - Half Garage</option>
                            <option value="10x15">10' Ã— 15' - Large Bedroom</option>
                            <option value="10x20">10' Ã— 20' - One Car Garage</option>
                            <option value="10x30">10' Ã— 30' - Two Car Garage</option>
                        </select>
                        <p class="help-text" id="unitSize-help">We'll help you find the right size if unsure</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="moveInDate">Desired Move-In Date</label>
                        <input type="date" id="moveInDate" name="moveInDate" aria-describedby="moveInDate-help">
                        <p class="help-text" id="moveInDate-help">Flexible? Leave blank</p>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="storageUse">What will you be storing?</label>
                        <textarea id="storageUse" name="storageUse" rows="3" aria-describedby="storageUse-help"></textarea>
                        <p class="help-text" id="storageUse-help">Optional: Helps us recommend the right unit size</p>
                    </div>
                </div>
            </div>

            <!-- Driver's License Upload -->
            <div class="form-section">
                <h2 class="section-title">Identification Upload</h2>
                
                <div class="form-group">
                    <label for="licenseUpload">Driver's License or State ID <span class="required">*</span></label>
                    <p class="help-text" style="margin-bottom: 1rem;">Please upload a clear photo of your driver's license or state-issued ID. Accepted formats: JPG, PNG, PDF. Photos will be automatically compressed if needed.</p>
                    
                    <div class="file-upload-wrapper">
                        <label for="licenseUpload" class="file-upload-area" id="uploadArea">
                            <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                            </svg>
                            <div class="upload-text">Click to upload or drag and drop</div>
                            <div class="upload-subtext">JPG, PNG or PDF â€¢ Auto-compressed if needed</div>
                        </label>
                        <input type="file" id="licenseUpload" name="licenseUpload" accept="image/jpeg,image/png,application/pdf" capture="environment" required aria-required="true" aria-describedby="licenseUpload-error">
                        <span class="error-message" id="licenseUpload-error" role="alert"></span>
                    </div>

                    <div class="file-preview" id="filePreview">
                        <div class="file-preview-header">
                            <div class="file-info">
                                <svg class="file-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>
                                </svg>
                                <div class="file-details">
                                    <h4 id="fileName">File name</h4>
                                    <span class="file-size" id="fileSize">0 KB</span>
                                </div>
                            </div>
                            <button type="button" class="remove-file" id="removeFile">Remove</button>
                        </div>
                        <img id="imagePreview" class="preview-image" alt="License preview" style="display: none;">
                    </div>
                </div>
            </div>

            <!-- Second Authorized User (Optional) -->
            <div class="form-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 class="section-title" style="margin-bottom: 0; border-bottom: none;">Second Authorized User (Optional)</h2>
                    <button type="button" class="btn-toggle" id="toggleSecondUser" style="background: var(--accent); color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-weight: 600;">
                        + Add Second User
                    </button>
                </div>
                <p class="help-text" style="margin-bottom: 1.5rem;">Add another person who will have access to this storage unit. They will receive their own gate code.</p>
                
                <div id="secondUserFields" style="display: none;">
                    <div class="form-row two-col">
                        <div class="form-group">
                            <label for="secondFirstName">First Name</label>
                            <input type="text" id="secondFirstName" name="secondFirstName" aria-describedby="secondFirstName-error">
                            <span class="error-message" id="secondFirstName-error" role="alert"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="secondLastName">Last Name</label>
                            <input type="text" id="secondLastName" name="secondLastName" aria-describedby="secondLastName-error">
                            <span class="error-message" id="secondLastName-error" role="alert"></span>
                        </div>
                    </div>

                    <div class="form-row two-col">
                        <div class="form-group">
                            <label for="secondEmail">Email Address</label>
                            <input type="email" id="secondEmail" name="secondEmail" aria-describedby="secondEmail-error">
                            <span class="error-message" id="secondEmail-error" role="alert"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="secondPhone">Phone Number</label>
                            <input type="tel" id="secondPhone" name="secondPhone" aria-describedby="secondPhone-error" placeholder="(555) 123-4567">
                            <span class="error-message" id="secondPhone-error" role="alert"></span>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="secondRelationship">Relationship to Primary Renter</label>
                            <select id="secondRelationship" name="secondRelationship">
                                <option value="">Select Relationship</option>
                                <option value="spouse">Spouse/Partner</option>
                                <option value="family">Family Member</option>
                                <option value="friend">Friend</option>
                                <option value="business">Business Partner</option>
                                <option value="employee">Employee</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 1.5rem;">
                        <label for="secondLicenseUpload">Second User's Driver's License or State ID</label>
                        <p class="help-text" style="margin-bottom: 1rem;">Upload a clear photo of the second user's driver's license or state ID. Accepted formats: JPG, PNG, PDF. Photos will be automatically compressed if needed.</p>
                        
                        <div class="file-upload-wrapper">
                            <label for="secondLicenseUpload" class="file-upload-area" id="secondUploadArea">
                                <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                                </svg>
                                <div class="upload-text">Click to upload or drag and drop</div>
                                <div class="upload-subtext">JPG, PNG or PDF â€¢ Auto-compressed if needed</div>
                            </label>
                            <input type="file" id="secondLicenseUpload" name="secondLicenseUpload" accept="image/jpeg,image/png,application/pdf" capture="environment" aria-describedby="secondLicenseUpload-error">
                            <span class="error-message" id="secondLicenseUpload-error" role="alert"></span>
                        </div>

                        <div class="file-preview" id="secondFilePreview">
                            <div class="file-preview-header">
                                <div class="file-info">
                                    <svg class="file-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>
                                    </svg>
                                    <div class="file-details">
                                        <h4 id="secondFileName">File name</h4>
                                        <span class="file-size" id="secondFileSize">0 KB</span>
                                    </div>
                                </div>
                                <button type="button" class="remove-file" id="removeSecondFile">Remove</button>
                            </div>
                            <img id="secondImagePreview" class="preview-image" alt="License preview" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Terms and Conditions -->
            <div class="form-section">
                <h2 class="section-title">Terms & Conditions</h2>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="termsAccept" name="termsAccept" required aria-required="true" aria-describedby="termsAccept-error">
                    <label for="termsAccept">
                        I certify that the information provided is accurate and complete. I understand that providing false information may result in denial of rental or termination of my rental agreement. I authorize Affordable Self Storage to verify the information provided and to perform a background check if necessary. <span class="required">*</span>
                    </label>
                </div>
                <span class="error-message" id="termsAccept-error" role="alert"></span>

                <div class="checkbox-group" style="margin-top: 1rem;">
                    <input type="checkbox" id="dataConsent" name="dataConsent" required aria-required="true" aria-describedby="dataConsent-error">
                    <label for="dataConsent">
                        I consent to Affordable Self Storage storing and processing my personal information and uploaded documents for the purpose of processing my rental application. This data will be kept confidential and secure. <span class="required">*</span>
                    </label>
                </div>
                <span class="error-message" id="dataConsent-error" role="alert"></span>
            </div>

            <!-- Submit Button -->
            <div class="submit-section">
                <button type="submit" class="submit-btn" id="submitBtn">
                    Submit Application
                </button>
            </div>
        </form>

        <!-- Success Message (hidden initially) -->
        <div class="success-message" id="successMessage">
            <svg class="success-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <h2>Application Submitted Successfully!</h2>
            <p>Thank you for your application. We'll review your information and contact you within 24 hours at the email address you provided.</p>
            <p style="margin-top: 1rem; font-weight: 600;">Application Reference: <span id="referenceNumber"></span></p>
        </div>
    </main>

    <!-- Footer -->
    <footer role="contentinfo">
        <p>&copy; <span id="current-year">2026</span> Merritt Paul Ltd dba Affordable Self Storage. All rights reserved.</p>
    </footer>

    <script>
        // Set current year
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Form elements
        const form = document.getElementById('applicationForm');
        const fileInput = document.getElementById('licenseUpload');
        const uploadArea = document.getElementById('uploadArea');
        const filePreview = document.getElementById('filePreview');
        const imagePreview = document.getElementById('imagePreview');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const removeFileBtn = document.getElementById('removeFile');
        const submitBtn = document.getElementById('submitBtn');
        const successMessage = document.getElementById('successMessage');

        // Second user elements
        const toggleSecondUserBtn = document.getElementById('toggleSecondUser');
        const secondUserFields = document.getElementById('secondUserFields');
        const secondFileInput = document.getElementById('secondLicenseUpload');
        const secondUploadArea = document.getElementById('secondUploadArea');
        const secondFilePreview = document.getElementById('secondFilePreview');
        const secondImagePreview = document.getElementById('secondImagePreview');
        const secondFileName = document.getElementById('secondFileName');
        const secondFileSize = document.getElementById('secondFileSize');
        const removeSecondFileBtn = document.getElementById('removeSecondFile');
        const secondPhoneInput = document.getElementById('secondPhone');

        let secondUserEnabled = false;

        // Toggle second user section
        toggleSecondUserBtn.addEventListener('click', function() {
            secondUserEnabled = !secondUserEnabled;
            
            if (secondUserEnabled) {
                secondUserFields.style.display = 'block';
                toggleSecondUserBtn.textContent = 'âˆ’ Remove Second User';
                toggleSecondUserBtn.style.background = 'var(--error)';
            } else {
                secondUserFields.style.display = 'none';
                toggleSecondUserBtn.textContent = '+ Add Second User';
                toggleSecondUserBtn.style.background = 'var(--accent)';
                
                // Clear second user fields
                document.getElementById('secondFirstName').value = '';
                document.getElementById('secondLastName').value = '';
                document.getElementById('secondEmail').value = '';
                document.getElementById('secondPhone').value = '';
                document.getElementById('secondRelationship').value = '';
                removeSecondFile();
            }
        });

        // Phone number formatting
        const phoneInput = document.getElementById('phone');
        phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0) {
                if (value.length <= 3) {
                    value = `(${value}`;
                } else if (value.length <= 6) {
                    value = `(${value.slice(0, 3)}) ${value.slice(3)}`;
                } else {
                    value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6, 10)}`;
                }
            }
            e.target.value = value;
        });

        // Phone number formatting for second user
        secondPhoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0) {
                if (value.length <= 3) {
                    value = `(${value}`;
                } else if (value.length <= 6) {
                    value = `(${value.slice(0, 3)}) ${value.slice(3)}`;
                } else {
                    value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6, 10)}`;
                }
            }
            e.target.value = value;
        });

        // ZIP code validation
        const zipInput = document.getElementById('zipCode');
        zipInput.addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/\D/g, '').slice(0, 5);
        });

        // File upload handling
        fileInput.addEventListener('change', handleFileSelect);
        removeFileBtn.addEventListener('click', removeFile);

        // Second user file upload handling
        secondFileInput.addEventListener('change', handleSecondFileSelect);
        removeSecondFileBtn.addEventListener('click', removeSecondFile);

        // Drag and drop
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                handleFileSelect();
            }
        });

        // Drag and drop for second user
        secondUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            secondUploadArea.classList.add('dragover');
        });

        secondUploadArea.addEventListener('dragleave', () => {
            secondUploadArea.classList.remove('dragover');
        });

        secondUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            secondUploadArea.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                secondFileInput.files = files;
                handleSecondFileSelect();
            }
        });

        function handleFileSelect() {
            const file = fileInput.files[0];
            
            if (!file) return;

            // Validate file type
            const validTypes = ['image/jpeg', 'image/png', 'application/pdf'];
            if (!validTypes.includes(file.type)) {
                showError('licenseUpload', 'Please upload a JPG, PNG, or PDF file');
                fileInput.value = '';
                return;
            }

            // Show loading indicator
            uploadArea.classList.add('has-file');
            fileName.textContent = 'Processing image...';
            fileSize.textContent = 'Please wait';

            // Resize if needed (2.2MB limit to allow for 2 licenses + form data under 5MB total)
            resizeImageIfNeeded(file, 2.2).then(processedFile => {
                // Validate final file size (should be under 2.2MB now)
                if (processedFile.size > 2.2 * 1024 * 1024) {
                    showError('licenseUpload', 'Unable to compress file below 2.2MB. Please use a different photo.');
                    fileInput.value = '';
                    uploadArea.classList.remove('has-file');
                    return;
                }

                clearError('licenseUpload');

                // Update file input with resized file
                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(processedFile);
                fileInput.files = dataTransfer.files;

                // Update UI
                fileName.textContent = processedFile.name + (processedFile.size < file.size ? ' (compressed)' : '');
                fileSize.textContent = formatFileSize(processedFile.size);
                filePreview.classList.add('visible');

                // Show image preview for image files
                if (processedFile.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imagePreview.src = e.target.result;
                        imagePreview.style.display = 'block';
                    };
                    reader.readAsDataURL(processedFile);
                } else {
                    imagePreview.style.display = 'none';
                }
            });
        }

        function removeFile() {
            fileInput.value = '';
            uploadArea.classList.remove('has-file');
            filePreview.classList.remove('visible');
            imagePreview.style.display = 'none';
            clearError('licenseUpload');
        }

        function handleSecondFileSelect() {
            const file = secondFileInput.files[0];
            
            if (!file) return;

            // Validate file type
            const validTypes = ['image/jpeg', 'image/png', 'application/pdf'];
            if (!validTypes.includes(file.type)) {
                showError('secondLicenseUpload', 'Please upload a JPG, PNG, or PDF file');
                secondFileInput.value = '';
                return;
            }

            // Show loading indicator
            secondUploadArea.classList.add('has-file');
            secondFileName.textContent = 'Processing image...';
            secondFileSize.textContent = 'Please wait';

            // Resize if needed (2.2MB limit to allow for 2 licenses + form data under 5MB total)
            resizeImageIfNeeded(file, 2.2).then(processedFile => {
                // Validate final file size (should be under 2.2MB now)
                if (processedFile.size > 2.2 * 1024 * 1024) {
                    showError('secondLicenseUpload', 'Unable to compress file below 2.2MB. Please use a different photo.');
                    secondFileInput.value = '';
                    secondUploadArea.classList.remove('has-file');
                    return;
                }

                clearError('secondLicenseUpload');

                // Update file input with resized file
                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(processedFile);
                secondFileInput.files = dataTransfer.files;

                // Update UI
                secondFileName.textContent = processedFile.name + (processedFile.size < file.size ? ' (compressed)' : '');
                secondFileSize.textContent = formatFileSize(processedFile.size);
                secondFilePreview.classList.add('visible');

                // Show image preview for image files
                if (processedFile.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        secondImagePreview.src = e.target.result;
                        secondImagePreview.style.display = 'block';
                    };
                    reader.readAsDataURL(processedFile);
                } else {
                    secondImagePreview.style.display = 'none';
                }
            });
        }

        function removeSecondFile() {
            secondFileInput.value = '';
            secondUploadArea.classList.remove('has-file');
            secondFilePreview.classList.remove('visible');
            secondImagePreview.style.display = 'none';
            clearError('secondLicenseUpload');
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // Automatic image resize function to keep under 2.2MB per image
        // (Allows for 2 licenses + form data to stay under 5MB total)
        async function resizeImageIfNeeded(file, maxSizeMB = 2.2) {
            // If it's a PDF or already small enough, return as-is
            if (file.type === 'application/pdf' || file.size <= maxSizeMB * 1024 * 1024) {
                return file;
            }

            // Only resize images
            if (!file.type.startsWith('image/')) {
                return file;
            }

            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        // Create canvas
                        const canvas = document.createElement('canvas');
                        let width = img.width;
                        let height = img.height;
                        
                        // Calculate new dimensions (start with reasonable size for license)
                        const MAX_WIDTH = 1920;  // Reduced from 2048 for smaller files
                        const MAX_HEIGHT = 1920;
                        
                        if (width > height) {
                            if (width > MAX_WIDTH) {
                                height *= MAX_WIDTH / width;
                                width = MAX_WIDTH;
                            }
                        } else {
                            if (height > MAX_HEIGHT) {
                                width *= MAX_HEIGHT / height;
                                height = MAX_HEIGHT;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // Convert to blob with quality adjustment
                        let quality = 0.75;  // Start at 75% quality
                        
                        const tryCompress = (q) => {
                            canvas.toBlob((blob) => {
                                // If still too large and quality can go lower, try again
                                if (blob.size > maxSizeMB * 1024 * 1024 && q > 0.3) {
                                    tryCompress(q - 0.1);
                                } else {
                                    // Create new file from blob
                                    const resizedFile = new File([blob], file.name, {
                                        type: 'image/jpeg',
                                        lastModified: Date.now()
                                    });
                                    resolve(resizedFile);
                                }
                            }, 'image/jpeg', q);
                        };
                        
                        tryCompress(quality);
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            });
        }

        // Form validation
        function showError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const errorSpan = document.getElementById(fieldId + '-error');
            
            field.classList.add('error');
            field.setAttribute('aria-invalid', 'true');
            errorSpan.textContent = message;
            errorSpan.classList.add('visible');
        }

        function clearError(fieldId) {
            const field = document.getElementById(fieldId);
            const errorSpan = document.getElementById(fieldId + '-error');
            
            field.classList.remove('error');
            field.setAttribute('aria-invalid', 'false');
            errorSpan.textContent = '';
            errorSpan.classList.remove('visible');
        }

        // Real-time validation
        const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'dateOfBirth', 
                                'street', 'city', 'state', 'zipCode'];

        requiredFields.forEach(fieldId => {
            const field = document.getElementById(fieldId);
            field.addEventListener('blur', function() {
                if (!this.value.trim()) {
                    showError(fieldId, 'This field is required');
                } else {
                    clearError(fieldId);
                }
            });

            field.addEventListener('input', function() {
                if (this.value.trim()) {
                    clearError(fieldId);
                }
            });
        });

        // Email validation
        document.getElementById('email').addEventListener('blur', function() {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!this.value.trim()) {
                showError('email', 'Email is required');
            } else if (!emailRegex.test(this.value)) {
                showError('email', 'Please enter a valid email address');
            } else {
                clearError('email');
            }
        });

        // Age validation
        document.getElementById('dateOfBirth').addEventListener('blur', function() {
            if (!this.value) {
                showError('dateOfBirth', 'Date of birth is required');
                return;
            }

            const birthDate = new Date(this.value);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }

            if (age < 18) {
                showError('dateOfBirth', 'You must be at least 18 years old to rent a storage unit');
            } else {
                clearError('dateOfBirth');
            }
        });

        // Form submission - Now handled by FormSubmit.co
        // The form will submit natively to FormSubmit.co
        // Validation still happens before submission
        form.addEventListener('submit', async function(e) {
            // Validate all fields before allowing submission
            let isValid = true;

            // Required text fields
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    showError(fieldId, 'This field is required');
                    isValid = false;
                }
            });

            // Email
            const emailField = document.getElementById('email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailField.value)) {
                showError('email', 'Please enter a valid email address');
                isValid = false;
            }

            // Age
            const dobField = document.getElementById('dateOfBirth');
            const birthDate = new Date(dobField.value);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            if (age < 18) {
                showError('dateOfBirth', 'You must be at least 18 years old');
                isValid = false;
            }

            // File upload
            if (!fileInput.files.length) {
                showError('licenseUpload', 'Please upload your driver\'s license or state ID');
                isValid = false;
            }

            // Checkboxes
            if (!document.getElementById('termsAccept').checked) {
                showError('termsAccept', 'You must accept the terms and conditions');
                isValid = false;
            }

            if (!document.getElementById('dataConsent').checked) {
                showError('dataConsent', 'You must consent to data processing');
                isValid = false;
            }

            if (!isValid) {
                e.preventDefault(); // Stop form submission if validation fails
                // Focus on first error
                const firstError = document.querySelector('.error');
                if (firstError) {
                    firstError.focus();
                }
                return false;
            }

            // If validation passes, show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting Application...';
            
            // Form will submit natively to FormSubmit.co
            // User will be redirected to success page or FormSubmit's thank you page
        });
    </script>
</body>
</html>